/*Cidade*/
CREATE TABLE TBCIDADE(
CODCIDADE NUMBER PRIMARY KEY,
CIDADE VARCHAR(60) NOT NULL);

/*Cep*/
CREATE TABLE TBCEP(
CODCEP NUMBER PRIMARY KEY,
CEP VARCHAR(9) NOT NULL,
CODCIDADE NUMBER NOT NULL,
CONSTRAINT FKCODCIDADE FOREIGN KEY (CODCIDADE) REFERENCES TBCIDADE (CODCIDADE));

/*Bairro*/
CREATE TABLE TBBAIRRO(
CODBAIRRO NUMBER PRIMARY KEY,
BAIRRO VARCHAR(50) NOT NULL);

/*Bairro has Cep*/
CREATE TABLE TBBAIRRO_HAS_TBCEP(
COD_BAIRRO_CEP NUMBER PRIMARY KEY,
CODBAIRRO NUMBER NOT NULL,
CODCEP NUMBER NOT NULL,
CONSTRAINT FKCODBAIRRO FOREIGN KEY (CODBAIRRO) REFERENCES TBBAIRRO (CODBAIRRO),
CONSTRAINT FKCODCEP FOREIGN KEY (CODCEP) REFERENCES TBCEP (CODCEP));

/*Endereço*/
CREATE TABLE TBENDERECO(
CODENDERECO NUMBER PRIMARY KEY,
ENDERECO VARCHAR(90) NOT NULL);

/*Endereço has bairro_cep*/
CREATE TABLE TBENDERECO_HAS_TBBAI_CEP(
COD_ENDERECO_BAI_CEP NUMBER PRIMARY KEY,
CODENDERECO NUMBER NOT NULL,
COD_BAIRRO_CEP NUMBER NOT NULL,
CONSTRAINT FKCODENDERECO FOREIGN KEY (CODENDERECO) REFERENCES TBENDERECO (CODENDERECO),
CONSTRAINT FKCOD_BAIRRO_CEP FOREIGN KEY (COD_BAIRRO_CEP) REFERENCES TBBAIRRO_HAS_TBCEP (COD_BAIRRO_CEP));

/*Pessoa*/
CREATE TABLE TBPESSOA(
CODPESSOA NUMBER PRIMARY KEY,
DATACADAS TIMESTAMP NOT NULL,
ULTALTERACAO TIMESTAMP NOT NULL,
NOME VARCHAR(60) NOT NULL,
CPFCNPJ VARCHAR(18) NOT NULL,
RGIE VARCHAR(11) NOT NULL,
NUMERO NUMBER NOT NULL,
CONTATO VARCHAR(13) NOT NULL,
COD_ENDERECO_BAI_CEP NUMBER NOT NULL,
CONSTRAINT FKCOD_ENDERECO_BAI_CEP FOREIGN KEY (COD_ENDERECO_BAI_CEP) REFERENCES TBENDERECO_HAS_TBBAI_CEP (COD_ENDERECO_BAI_CEP));

/*Funcionário*/
CREATE TABLE TBFUNCIONARIO(
CODFUNC NUMBER PRIMARY KEY,
SEXO VARCHAR(1) NOT NULL,
ESTADOCIVIL VARCHAR(3) NOT NULL,
DATANASC DATE NOT NULL,
COMPLEMENTO VARCHAR(30) NOT NULL,
NUMCARTTRAB VARCHAR(13) NOT NULL,
CARGO VARCHAR(50) NOT NULL,
SALARIO NUMBER NOT NULL,
USUARIO VARCHAR(15) NOT NULL,
SENHA VARCHAR(20) NOT NULL,
PERMISSAO NUMBER NOT NULL,
DATAADMISSAO DATE NOT NULL,
DATADEMISSAO DATE,
CODPESSOA NUMBER NOT NULL,
CONSTRAINT FKCODPESSOA_FUNC FOREIGN KEY (CODPESSOA) REFERENCES TBPESSOA (CODPESSOA));

/*Fornecedor*/
CREATE TABLE TBFORNECEDOR(
CODFORN NUMBER PRIMARY KEY,
EMAIL VARCHAR(150),
HOMEPAGE VARCHAR(150),
CODPESSOA NUMBER NOT NULL,
CONSTRAINT FKCODPESSOA_FORN FOREIGN KEY (CODPESSOA) REFERENCES TBPESSOA (CODPESSOA));

/*Empresa*/
CREATE TABLE TBEMPRESA(
CODEMP NUMBER PRIMARY KEY,
EMAIL VARCHAR(150),
CODPESSOA NUMBER NOT NULL,
CONSTRAINT FKCODPESSOA_EMP FOREIGN KEY (CODPESSOA) REFERENCES TBPESSOA (CODPESSOA));

/*Ambiente*/
CREATE TABLE TBAMBIENTE(
CODAMBIENTE NUMBER PRIMARY KEY,
AMBIENTE VARCHAR(40));

/*Defeito*/
CREATE TABLE TBDEFEITO(
CODDEFEITO NUMBER PRIMARY KEY,
DEFEITO VARCHAR(200));

/*Patrimonio*/
CREATE TABLE TBPATRIMONIO(
CODPATRIMONIO NUMBER PRIMARY KEY,
DATACADAS TIMESTAMP NOT NULL,
ULTALTERACAO TIMESTAMP NOT NULL,
DESCRICAO VARCHAR(100) NOT NULL,
DATAAQUISICAO DATE NOT NULL,
NUMNOTAFISCAL NUMBER NOT NULL,
NUMSERIE VARCHAR(30) NOT NULL,
MESESGARANTIA NUMBER NOT NULL,
VALOR NUMBER NOT NULL,
SITUACAOBEM NUMBER NOT NULL,
CODAMBIENTE NUMBER NOT NULL,
CODFORN NUMBER NOT NULL,
CODEMP NUMBER NOT NULL,
CONSTRAINT FKCODAMBIENTE_PATRI FOREIGN KEY (CODAMBIENTE) REFERENCES TBAMBIENTE (CODAMBIENTE),
CONSTRAINT FKCODFORN_PATRI FOREIGN KEY (CODFORN) REFERENCES TBFORNECEDOR (CODFORN),
CONSTRAINT FKCODEMP_PATRI FOREIGN KEY (CODEMP) REFERENCES TBEMPRESA (CODEMP));

/*Chamada*/
CREATE TABLE TBCHAMADA(
NUMCHAMADA NUMBER PRIMARY KEY,
DATAREALIZACAO TIMESTAMP NOT NULL,
SITUACAO VARCHAR(9) NOT NULL,
NUMOCORRENCIAS NUMBER NOT NULL,
CODAMBIENTE NUMBER NOT NULL,
CODPATRIMONIO NUMBER NOT NULL,
CODFUNC NUMBER NOT NULL,
CODDEFEITO NUMBER NOT NULL,
CONSTRAINT FKCODDEFEITO_CHAM FOREIGN KEY (CODDEFEITO) REFERENCES TBDEFEITO (CODDEFEITO),
CONSTRAINT FKCODAMBIENTE_CHAM FOREIGN KEY (CODAMBIENTE) REFERENCES TBAMBIENTE (CODAMBIENTE),
CONSTRAINT FKCODPATRIMONIO_CHAM FOREIGN KEY (CODPATRIMONIO) REFERENCES TBPATRIMONIO (CODPATRIMONIO),
CONSTRAINT FKCODFUNC_CHAM FOREIGN KEY (CODFUNC) REFERENCES TBFUNCIONARIO (CODFUNC));

/*Item Chamada*/
CREATE TABLE TBITEMCHAMADA(
CODITEMCHAM NUMBER PRIMARY KEY,
DESCRICAO VARCHAR(150) NOT NULL,
QTDADE NUMBER NOT NULL,
VALOR NUMBER NOT NULL,
DATAITEM TIMESTAMP NOT NULL,
NUMCHAMADA NUMBER NOT NULL,
CONSTRAINT FKNUMCHAMADA_ITEM FOREIGN KEY (NUMCHAMADA) REFERENCES TBCHAMADA (NUMCHAMADA));